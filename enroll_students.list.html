<!DOCTYPE html>

<html>
	<head>
		<title>Class Room</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<script src="/node_modules/jquery/dist/jquery.min.js"></script>
		<script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
		
		<style>
		
			.firstcontent {
				background-color:#683AB7;
				font-size:15px;	
				
			}
			.nav-item a:hover {
					color:blue;
			}
			.container {
			
				width:70%;
				margin:auto;
				}
				
			.form-group {
				margin-top:20px;
				
				
			}
			.students-wrapper {
				
				width:80%;
				margin:auto;
			}
			.error_form{
				display: none;
				color: red;
			}
		.minLength-validation {
				display: none;
				color: red;
				}
		.maxLength-validation {
				display: none;
				color: red;
				}
		.editElm{
				display:none;
				}
		.blockquote-footer {
								background-color:#6A3BBB;
								color:white;
			}
		</style>
	</head>
	<body>
			<nav class="navbar navbar-expand-lg firstcontent">
				<a class="navbar-brand border p-2 text-white" href="#">AT</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
			
				  <ul class="navbar-nav" >
				  <li class="nav-item">
					<a class="nav-link text-white tooltiptext" href="MyWebPage.html">Home</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link text-white tooltiptext" href="contact.info.01.html">Contact Us</a>
				  </li>
				  <li class="nav-item active">
					<a class="nav-link text-white tooltiptext" href="#">Enroll Students</a>
				  </li>
				  </div>
			</nav>

					<div class="container"> 
				
					<h2 class="text-center">Students Enrollment Form</h2>
					
					<form>
						  <div class="form-group row" id="studentForm">
							<label for="firstName" class="col-sm-2 col-form-label">FirstName</label>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="inputFirstName" name="first" placeholder="David">
								<p class="error_form" id="firstName_required_validation">First Name Required</p>
								
									
							</div>
							</div>
						  
						  <div class="form-group row">
							<label for="lastName" class="col-sm-2 col-form-label">LastName</label>
							<div class="col-sm-4">
							  <input type="text" class="form-control" id="inputLastName" name="last" placeholder="Cooper">
								<p class="error_form" id="lastName_required_validation">Last Name Required</p>
							</div>
							</div>
							<div class="form-group row">
							<label for="age" class="col-sm-2 col-form-label">Age</label>
							<div class="col-sm-4">
							  <input type="text" class="form-control" name="old" id="inputAge">
							  <p class="error_form" id="age_required_validation">Age Is Required</p>
							  <p class="minLength-validation">age must be more than 3yrs</p>
							  <p class="maxLength-validation">age must not be more than 18yrs</p>
							 
							</div>
							 
							</div>
							
							<div class="form-group row">
							<label for="email" class="col-sm-2 col-form-label">Email</label>
							<div class="col-sm-4">
							  <input type="text" class="form-control" name="mail" id="inputEmail">
							  <p class="error_form" id="email_required_validation">Email Required</p>
							</div>
							</div>
							<div class="form-group row">
							<label for="phone" class="col-sm-2 col-form-label">Phone Number</label>
							<div class="col-sm-4">
							<input type="text" class="form-control" name="number" id="inputPhoneNumber">
							  <p class="error_form" id="phoneNumber_required_validation">Phone Number Required</p>
							  <p class="minLength-validation">Required more than 8 digits</p>
							  <p class="maxLength-validation">Required not more than 12 digits</p>
							</div>
							</div>
							<div>
								<button type="button" id="btnAdd" class="btn btn-info" mb-4">Add</button>
								<button type="button" id="btnSaveEdit" class="btn btn-info editElm" mb-4">SaveEdit</button>
								<button type="button" id="btnCancel" class="btn btn-info editElm" mb-4">Cancel</button>
							
							</div>
						  </div>
						  </div>
					</form>
					
					<section class="students-wrapper">

						<table class="table table-bordered" id="students">
					  <thead class ="thead-light">
						<tr>
						  <th>FirstName</th>
						  <th>LastName</th>
						   <th id="sortAge">Age</th>
						  <th>Email</th>
						  <th>Phone Number</th>
						  <th>Action</td>
						  
						 </tr>
					  </thead>
					  <tbody>
					  
					  </tbody>
						
					</table>
												
					
					
					</section>
					
			</div>
			<div class="blockquote-footer">
			<span class="footerA">Copyright@2019-Sowjanya</span>
			<span class="footerB float-sm-right">youremail@address.com</span>
			</div>
					
					<script>
					
						$(document).ready(function() {
			
						var students = [
							
						{
							firstName: "Matt",
							lastName: "Wilkie",
							age: 15,
							email: "mattwielky@google.com",
							phoneNumber: "9182345656"
						},
						{
							firstName: "Jhon",
							lastName: "Wood",
							age: 12,
							email: "jhon02@google.com",
							phoneNumber: "6145678903"
						},
						{
							firstName: "Andrew",
							lastName: "Mathew",
							age: 17,
							email: "andrew_mathew@google.com",
							phoneNumber: "9182345678"
						
						},
						];
						
						for( i = 0 ; i < students.length ; i++ ) {
				students[i].id = generateRandomNumber();
				$("#students").find("tbody").append("<tr data-student='" + students[i].id +"'> <td class='fName'> " + students[i].firstName + " </td> <td class='lName'> " + students[i].lastName + " </td> <td class='age'> " + students[i].age + " </td> <td class='email'> " + students[i].email + " </td> <td class='phoneNumber'> " + students[i].phoneNumber + " </td><td><button class='edit btn btn-info' data-student='" + students[i].id +"'>edit</button><button class='delete btn btn-info' delete-student='" + students[i].id +"'>delete</button> </td> </tr>");
			}
				
							
					$("#btnAdd").click(function() {		
							
							var isInValid = validateInputFields();
							
							var $fName = $("#inputFirstName");
							var $lName = $("#inputLastName");
							var $age = $("#inputAge");
							var $email = $("#inputEmail");
							var $phoneNumber = $("#inputPhoneNumber");
							
							//var $fNameRequired = $("#firstName_required_validation");
				
							var fName = $fName.val();
							var lName = $lName.val();
							var age = $age.val();
							var email = $email.val();
							var phoneNumber = $phoneNumber.val();
											
							
							if (!fName) {
							$fName.next().show();
							isInValid == false;
							} else if (fName){
							$fName.next().hide();
								
							
							}
							// Using jQuery to select an element using ID use #elementId
							//Inorder to use style display none for the error message while the input #firsName has value using .hide() jQuery inbuild function;
							
							if (!lName) {
								
								$lName.next().show();
								isInValid = false;
							} else if (lName) {
								$lName.next().hide();
							}
							
							if (!age) {
								$age.next().show();
								sInValid = false;
							} else if (age){
								$age.next().hide();
							}
							if (age > 1 && age < 3 ) {
								isInValid = false;
								$age.parent().find(".minLength-validation").show();
								} else if(age >= 3) {
									$age.parent().find(".minLength-validation").hide();
								}
							
							if (age > 18) {
								isInValid = false;
								$age.parent().find(".maxLength-validation").show();
								} else if(age <= 18) {
									$age.parent().find(".maxLength-validation").hide();
								}
								
							
							if (!email) {
								$email.next().show();
								isInValid = false;
								
							} 	else if(email) {
								$email.next().hide();
							}
							
							if (!phoneNumber) {
								isInValid = false;
								$phoneNumber.next().show();
							} else if (phoneNumber) {
								$phoneNumber.next().hide();
							}
							if (phoneNumber.length > 1 && phoneNumber.length < 8) {
									isInValid = false;
									$phoneNumber.parent().find(".minLength-validation").show();
								} else if(phoneNumber.length >= 8) {
									$phoneNumber.parent().find(".minLength-validation").hide();
								}
							
							if (phoneNumber.length > 12) {
									isInValid = false;
									$phoneNumber.parent().find(".maxLength-validation").show();
								} else if(phoneNumber.length <= 12) {
									$phoneNumber.parent().find(".maxLength-validation").hide();
								}
							
							
						
							 
							if (isInValid === true) {
								
								var student = {
								firstName:fName,
								lastName:lName,
								age: age,
								email: email,
								phoneNumber: phoneNumber
							};
								student.id = generateRandomNumber();
								
								$("#students").find("tbody").append("<tr> <td> " + fName + " </td> <td> " + lName + "</td> <td> " + age + "</td> <td> " + email + " </td> <td> " + phoneNumber + "</td><td><button class='btn btn-info' data-student='" + student.id + "'>edit</button><button class='delete btn btn-info' delete-student='" + student.id +"'>delete</button> </td> </tr>");
								$("button[data-student='" + student.id + "']").bind('click',editStudent);
							
							students.push(student);
							
							$fName.val("");
							$lName.val("");
							$age.val("");
							$email.val("");
							$phoneNumber.val("");
							
						}	
							
						});	
						$("#generateRandomNum").click(generateRandomNumber);
						
						var today = new Date();
						function generateRandomNumber () {
							var thisTime = new Date();
							var timeNum = thisTime.getTime();
							
							var min = 1000;
							var max = 500000;
							var randomNum = Math.floor(Math.random() * (max - min) + min);
							var answer = randomNum.toString() + timeNum.toString();
							return answer;
						}
						
							var validateInputFields = function () {
							var isInValid =true;
						
							var $fName = $("#inputFirstName");
							var $lName = $("#inputLastName");
							var $age = $("#inputAge");
							var $email = $("#inputEmail");
							var $phoneNumber = $("#inputPhoneNumber");
							
							//var $fNameRequired = $("#firstName_required_validation");
				
							var fName = $fName.val();
							var lName = $lName.val();
							var age = $age.val();
							var email = $email.val();
							var phoneNumber = $phoneNumber.val();
											
							
							if (!fName) {
							$fName.next().show();
							isInValid == false;
							} else if (fName){
							$fName.next().hide();
								
							
							}
							// Using jQuery to select an element using ID use #elementId
							//Inorder to use style display none for the error message while the input #firsName has value using .hide() jQuery inbuild function;
							
							if (!lName) {
								
							$lName.next().show();
							isInValid = false;
							} else if (lName) {
								$lName.next().hide();
							}
							
							if (!age) {
							$age.next().show();
							isInValid = false;
							} else if (age){
								$age.next().hide();
							}
							if (age > 1 && age < 3 ) {
									isInValid = false;
									$age.parent().find(".minLength-validation").show();
								} else if(age >= 3 ) {
									$age.parent().find(".minLength-validation").hide();
								}
							
							if (age > 18) {
									isInValid = false;
									$age.parent().find(".maxLength-validation").show();
								} else if(age <= 18) {
									$age.parent().find(".maxLength-validation").hide();
								}
								
							
							if (!email) {
								$email.next().show();
								isInValid = false;
								
							} 	else if(email) {
								$email.next().hide();
							}
							
								if (!phoneNumber) {
								isInValid = false;
								$phoneNumber.next().show();
							} else if (phoneNumber) {
								$phoneNumber.next().hide();
							}
							if (phoneNumber.length > 1 && phoneNumber.length < 8) {
									isInValid = false;
									$phoneNumber.parent().find(".minLength-validation").show();
								} else if(phoneNumber.length >= 8) {
									$phoneNumber.parent().find(".minLength-validation").hide();
								}
							
							if (phoneNumber.length > 12) {
									isInValid = false;
									$phoneNumber.parent().find(".maxLength-validation").show();
								} else if(phoneNumber.length <= 12) {
									$phoneNumber.parent().find(".maxLength-validation").hide();
								}
								return isInValid;
							}
							
					
					
						
						$(".edit").click(editStudent);
						
						var editStudentId;
						
						
						function editStudent (e){
							$(".editElm").show();
							$("#btnAdd").hide();
							var $fName = $("#inputFirstName");
							var $lName = $("#inputLastName");
							var $age = $("#inputAge");
							var $email = $("#inputEmail");
							var $phoneNumber = $("#inputPhoneNumber");
						
							var studentToEdit = $(e.target).attr("data-student");
							for( i = 0 ; i < students.length ; i++) {
								var thisStudentId = students[i].id;					
								if(studentToEdit === thisStudentId) 
								{
									$fName.val(students[i].firstName);
									$lName.val(students[i].lastName);
									$age.val(students[i].age);
									$email.val(students[i].email);
									$phoneNumber.val(students[i].phoneNumber);
									
									editStudentId = students[i].id;
								}	
							}
						}
					
				
						
						 $("#btnSaveEdit").on('click',function(){
							
						var isInValid=validateInputFields();

						var firstName=$("#inputFirstName");
						var lastName=$("#inputLastName");
						var age=$("#inputAge");
						var email=$("#inputEmail");
						var phoneNumber=$("#inputPhoneNumber");

						var $fName=firstName.val();
						var $lName=lastName.val();
						var $age=age.val();
						var $email=email.val();
						var $phoneNumber=phoneNumber.val();

						var student = {}; 
						if(isInValid === true){
							for( i = 0 ; i < students.length ; i++)
							{
							student = students[i];
							var selectedStudent_Id = students[i].id;
							
							if(editStudentId === selectedStudent_Id)
							{
								students[i].firstName = $fName;
								students[i].lastName = $lName;
								students[i].age = $age;
								students[i].email = $email;
								students[i].phoneNumber = $phoneNumber;
								
								$("tr[data-student="+selectedStudent_Id+"]").html("<td> " + $fName + " </td> <td> " + $lName + " </td> <td> " + $age + " </td> <td> " + $email + " </td> <td> " + $phoneNumber + "</td><td> <button class='edit btn btn-info' data-student='" + students[i].id + "'>Edit</button><button class='delete btn btn-info' delete-student='" + student.id +"'>delete</button> </td>");
								break;
							} 
							}
								$("button[data-student=" + student.id + "]").on('click', editStudent)
								}
						});
						
							$("#btnCancel").on('click',function(){
							$(".editElm").hide();
							$("#btnAdd").show();
								var firstName=$("#inputFirstName");
								var lastName=$("#inputLastName");
								var age=$("#inputAge");
								var email=$("#inputEmail");
								var phoneNumber=$("#inputPhoneNumber");
								
								firstName.val("");
								lastName.val("");
								age.val("");
								email.val("");
								phoneNumber.val("");
						});
						
						
						
									  //////////Sorting First Name and LastName////////////
							var th=document.getElementsByTagName('th');

							for(var col=0; col < 2; col++){
								th[col].addEventListener('click',item(col));
							}
								
							function item(col)
							{
								return function()
								{
								sortTable(col)
								}
							}

							//////////// Function to sort table //////////////
							function sortTable(col) {
								var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
								table = document.getElementById("students");
								switching = true;
								dir = "asc"; 
								// Make a loop that will continue until no switching has been done:
								while (switching) 
								{
								   switching = false; //start by saying: no switching is done:
									rows = table.rows;
									//Loop through all table rows (except the first, which contains table headers):
									for (i = 1; i < (rows.length - 1); i++) 
									{
										shouldSwitch = false;//start by saying there should be no switching:
										// Get the two elements you want to compare,one from current row and one from the next:
										x = rows[i].getElementsByTagName("TD")[col];
										y = rows[i + 1].getElementsByTagName("TD")[col];

										// check if the two rows should switch place,based on the direction, asc or desc:
										if (dir == "asc") 
										{
											if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) 
											{//if so, mark as a switch and break the loop:
												shouldSwitch= true;
												break;
											}
										} else if (dir == "desc") 
										{
											if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) //if so, mark as a switch and break the loop:
											{
												shouldSwitch = true;
												break;
											}
										}
									}
									//   If a switch has been marked, make the switch and mark that a switch has been done:
									if (shouldSwitch) 
									{
									
										rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
										switching = true;
										switchcount ++;  //Each time a switch is done, increase this count by 1:    
									}
									//If no switching has been done AND the direction is "asc",set the direction to "desc" and run the while loop again.
									else 
									{
										if (switchcount == 0 && dir == "asc") 
										{
												dir = "desc";
												switching = true;
										}
									}
								}
			
						 $("#sortAge").click(function(){
							var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
								table = document.getElementById("students");
								switching = true;
								dir = "asc"; 
								while (switching) 
							{
							   switching = false; 
								rows = table.rows;
								for (i = 1; i < (rows.length - 1); i++) 
							{
								shouldSwitch = false;
								x = rows[i].getElementsByTagName("TD")[2];
								y = rows[i + 1].getElementsByTagName("TD")[2];

								if (dir == "asc") 
								{
									if (Number(x.innerHTML) > Number(y.innerHTML))
									{
										shouldSwitch= true;
										break;
									}
								} else if (dir == "desc") 
								{
									if (Number(x.innerHTML) < Number(y.innerHTML)) 
									{
										shouldSwitch = true;
										break;
									}
								}
							}
								if (shouldSwitch) 
								{
							
								rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
								switching = true;
								switchcount ++;     
								}
								else 
								{
								if (switchcount == 0 && dir == "asc") 
								{
										dir = "desc";
										switching = true;
								}
							}
						}
						}); 
						
						//Function Deleting the row//
									$("#students").on('click','.delete',function() {
									$(this).closest('tr').remove();
						});
					
						
			}
			});
											
		
				
						

				

			
		</script>			
						
		
	</body>

</html>